import{T as A}from"./Top-Bn4jeg1z.js";import{r as T,c as B,a as r,b as h,o as m,d as e,w as o,e as s,f as $,g as D,t as y,F as v,h as V,i as O,j as R,k as w,l as L,u as z,m as F,n as U,p as H,E as M}from"./index-DSKI6YI0.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as E}from"./me-_I26BSij.js";const j=["innerHTML"],J={key:0,class:"categories-height"},G={class:"categories-height"},Y=["innerHTML"],Z=["innerHTML"],q={__name:"ArticleHeader",props:["article"],setup(k){const i=k,g=T(40),d=t=>{if(!t)return"未知日期";console.log("原始日期输入:",t,"类型:",typeof t);try{let c;if(typeof t=="number"||/^\d+$/.test(t)){const a=typeof t=="number"?t:parseInt(t);a.toString().length===10?c=new Date(a*1e3):c=new Date(a)}else typeof t=="string"?c=new Date(t):c=new Date(t);if(console.log("转换后的日期对象:",c),isNaN(c.getTime()))return console.log("日期无效，时间戳:",t),"无效日期";const _=V(c,"yyyy-MM-dd HH:mm:ss");return console.log("格式化结果:",_),_}catch(c){console.error("日期格式化错误:",c);try{const _=typeof t=="number"?t:parseInt(t),a=new Date(_),n=a.getFullYear(),x=String(a.getMonth()+1).padStart(2,"0"),p=String(a.getDate()).padStart(2,"0");return`${n}-${x}-${p}`}catch{return"日期错误"}}},l=B(()=>d(i.article.created));return(t,c)=>{const _=r("el-image"),a=r("el-col"),n=r("User"),x=r("el-icon"),p=r("el-space"),u=r("el-row"),P=r("router-link"),b=r("el-divider");return m(),h(v,null,[e(u,null,{default:o(()=>[e(a,{sm:24,md:11},{default:o(()=>[e(_,{src:i.article.thumbnail},null,8,["src"])]),_:1}),e(a,{sm:0,md:1}),e(a,{sm:24,md:12},{default:o(()=>[e(u,{align:"middle"},{default:o(()=>[e(p,{size:g.value},{default:o(()=>[s("span",{id:"categories",class:"categories-height",innerHTML:i.article.categories},null,8,j),i.article.authorName?(m(),h("span",J,[e(x,{style:{"vertical-align":"middle","margin-right":"2px"}},{default:o(()=>[e(n)]),_:1}),D(" "+y(i.article.authorName),1)])):$("",!0),s("span",G,"发布于 "+y(l.value),1)]),_:1},8,["size"])]),_:1}),e(u,{align:"middle"},{default:o(()=>[e(P,{to:{name:"articleAndComment",params:{articleId:i.article.id}},class:"title-link"},{default:o(()=>[s("span",{class:"title",innerHTML:i.article.title},null,8,Y)]),_:1},8,["to"])]),_:1}),e(u,{align:"middle"},{default:o(()=>[s("span",{innerHTML:i.article.content.substring(0,90)},null,8,Z)]),_:1})]),_:1}),e(a,{span:1})]),_:1}),e(b)],64)}}},K=C(q,[["__scopeId","data-v-6c94c9c7"]]),Q={class:"read-ranking-container"},W={__name:"ReadRanking",props:["articleVOs"],setup(k){const i=k;let g=O([]);return R(()=>i.articleVOs,(d,l)=>{if(g.length=0,!(!d||!Array.isArray(d)))for(let t=0;t<d.length;t++)d[t]&&d[t].title&&g.push({index:t+1,id:d[t].id,title:d[t].title,hits:d[t].hits||0})}),(d,l)=>{const t=r("router-link"),c=r("el-divider"),_=r("el-col"),a=r("el-row");return m(),h("div",Q,[(m(!0),h(v,null,L(z(g),n=>(m(),w(a,{key:n.id},{default:o(()=>[e(_,{span:24},{default:o(()=>[s("span",null,y(n.index)+"、",1),e(t,{to:{name:"articleAndComment",params:{articleId:n.id}},class:"ranking-title-link"},{default:o(()=>[D(y(n.title),1)]),_:2},1032,["to"]),s("span",null,y(n.hits),1),e(c,{class:"divider"})]),_:2},1024)]),_:2},1024))),128)),z(g).length===0?(m(),w(a,{key:0},{default:o(()=>[e(_,{span:24},{default:o(()=>[...l[0]||(l[0]=[s("div",{style:{"text-align":"center",color:"#999",padding:"20px"}}," 暂无排行数据 ",-1)])]),_:1})]),_:1})):$("",!0)])}}},X=C(W,[["__scopeId","data-v-7be3e14a"]]),I={align:"center"},ee={align:"center"},te={align:"left"},ae={__name:"index",setup(k){const i=F(),g=T(20),d=H("axios"),l=O({articles:[],pageParams:{page:i.home.page,rows:5,total:0},articleVOs:[]});function t(){d({method:"post",url:"/api/article/getIndexData1",data:l.pageParams}).then(a=>{a.data.success?(l.articles=a.data.map.articles,l.articleVOs=a.data.map.articleVOs,l.pageParams=a.data.map.pageParams,a.data.map.pageParams&&(l.pageParams=a.data.map.pageParams)):M.alert(a.data.msg,"结果")}).catch(a=>{M.alert("系统错误！","结果")})}t(),H("toArticle"),U((a,n)=>(a.fullPath.indexOf("article_comment")>=0?i.home.page=l.pageParams.page:i.home.page=1,!0));function c(a){l.pageParams.page=a,t()}function _(){window.open("https://github.com/Zzt147/-SpringBoot-Vue3-","_blank")}return(a,n)=>{const x=r("el-affix"),p=r("el-col"),u=r("el-row"),P=r("el-pagination"),b=r("el-image"),S=r("font-awesome-icon"),N=r("el-space");return m(),h(v,null,[e(x,null,{default:o(()=>[e(A)]),_:1}),e(u,{style:{"margin-top":"40px"},align:"top"},{default:o(()=>[e(p,{span:1}),e(p,{span:14},{default:o(()=>[e(u,null,{default:o(()=>[e(p,null,{default:o(()=>[(m(!0),h(v,null,L(l.articles,f=>(m(),w(K,{key:f.id,article:f},null,8,["article"]))),128))]),_:1})]),_:1}),e(u,null,{default:o(()=>[e(p,null,{default:o(()=>[e(P,{currentPage:l.pageParams.page,"onUpdate:currentPage":n[0]||(n[0]=f=>l.pageParams.page=f),"page-size":l.pageParams.rows,"onUpdate:pageSize":n[1]||(n[1]=f=>l.pageParams.rows=f),layout:"prev, pager, next",total:l.pageParams.total,onCurrentChange:c,"pager-count":7},null,8,["currentPage","page-size","total"])]),_:1})]),_:1})]),_:1}),e(p,{span:1}),e(p,{span:7},{default:o(()=>[s("fieldset",I,[n[2]||(n[2]=s("legend",null,[s("h3",null,"CrazyStone")],-1)),e(b,{src:z(E)},null,8,["src"]),n[3]||(n[3]=s("div",{style:{"margin-top":"16px"}},"Java后台开发",-1)),n[4]||(n[4]=s("div",{style:{"margin-top":"16px"}},[s("span",{style:{"text-decoration":"line-through"}},"个人"),D("(并非)博客小站，主要发表关于Java、Spring、Docker等相关文章 ")],-1))]),s("fieldset",ee,[n[5]||(n[5]=s("legend",null,[s("h3",null,"联系我")],-1)),e(N,{size:g.value},{default:o(()=>[e(S,{class:"icon",icon:["fab","github"],size:"lg",border:"",onClick:_}),e(S,{class:"icon",icon:["fab","weibo"],size:"lg",border:""})]),_:1},8,["size"])]),s("fieldset",te,[n[6]||(n[6]=s("legend",null,[s("h3",null,"阅读排行榜")],-1)),e(X,{articleVOs:l.articleVOs},null,8,["articleVOs"])])]),_:1}),e(p,{span:1})]),_:1})],64)}}},re=C(ae,[["__scopeId","data-v-c9ee8880"]]);export{re as default};
