import{m as j,i as D,r as E,b as I,d as t,w as l,a as r,F as N,Y as U,p as y,E as u,o as $,e as P,u as s,g,t as F,Z as M,_ as Z}from"./index-Kk2cQA5d.js";const T={class:"dialog-footer"},G={__name:"ManageArticle",setup(Y){const i=j(),w=y("axios");let o=D({articleVOs:[],pageParams:{page:1,rows:4,total:0}});function m(){U(i.page.pageParams)||(o.pageParams=i.page.pageParams),w({method:"post",url:"/api/article/getAPageOfArticleVO",data:o.pageParams}).then(a=>{a.data.success?(a.data.map.articleVOs!=null?(o.articleVOs=a.data.map.articleVOs,a.data.map.pageParams&&a.data.map.pageParams.total!==void 0&&(o.pageParams.total=a.data.map.pageParams.total)):u.alert("无文章！","结果"),p.value=!1):u.alert(a.data.msg,"结果"),i.page.pageParams=null}).catch(a=>{u.alert("系统错误！","结果"),i.page.pageParams=null})}m();function C(a){o.pageParams.rows=a,o.pageParams.page=1,m()}function V(a){o.pageParams.page=a,m()}const v=y("editArticle");function k(a){i.articleId=a,i.page.pageParams=o.pageParams,v()}let b;const p=E(!1);function x(a){b=a,p.value=!0}function z(){w({method:"post",url:"/api/article/deleteById?id="+b}).then(a=>{a.data.success?(m(),p.value=!1):u.alert(a.data.msg,"结果")}).catch(a=>{u.alert("系统错误！","结果")})}return(a,e)=>{const f=r("el-col"),_=r("el-row"),A=r("router-link"),d=r("el-table-column"),c=r("el-button"),h=r("el-table"),O=r("el-pagination"),B=r("el-dialog");return $(),I(N,null,[t(_,null,{default:l(()=>[t(f,{span:24},{default:l(()=>[...e[4]||(e[4]=[P("h4",{style:{"margin-left":"10px"}},"文章管理",-1)])]),_:1})]),_:1}),t(_,null,{default:l(()=>[t(f,{span:24},{default:l(()=>[t(h,{data:s(o).articleVOs,stripe:"",border:"",style:{width:"100%"}},{default:l(()=>[t(d,{label:"文章标题",width:"360"},{default:l(n=>[t(A,{to:{path:"/article_comment/"+n.row.id},style:{"text-decoration":"none"}},{default:l(()=>[g(F(n.row.title),1)]),_:2},1032,["to"])]),_:1}),t(d,{prop:"created",label:"发布时间",width:"170"}),t(d,{prop:"hits",label:"浏览量",width:"70"}),t(d,{prop:"categories",label:"所属分类",width:"180"}),t(d,{label:"操作"},{default:l(n=>[t(c,{type:"primary",onClick:S=>k(n.row.id),icon:s(M),size:"small"},{default:l(()=>[...e[5]||(e[5]=[g(" 编辑 ",-1)])]),_:1},8,["onClick","icon"]),t(c,{type:"danger",onClick:S=>x(n.row.id),icon:s(Z),size:"small"},{default:l(()=>[...e[6]||(e[6]=[g("删除",-1)])]),_:1},8,["onClick","icon"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),t(_,{justify:"center",align:"middle",style:{height:"60px"}},{default:l(()=>[t(f,{span:16},{default:l(()=>[t(O,{"current-page":s(o).pageParams.page,"onUpdate:currentPage":e[0]||(e[0]=n=>s(o).pageParams.page=n),"page-size":s(o).pageParams.rows,"onUpdate:pageSize":e[1]||(e[1]=n=>s(o).pageParams.rows=n),"page-sizes":[2,4,10,20],layout:"total, sizes, prev, pager, next, jumper",total:s(o).pageParams.total,onSizeChange:C,onCurrentChange:V,"pager-count":7},null,8,["current-page","page-size","total"])]),_:1})]),_:1}),t(B,{modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=n=>p.value=n),title:"注意",width:"30%",center:""},{footer:l(()=>[P("span",T,[t(c,{onClick:e[2]||(e[2]=n=>p.value=!1)},{default:l(()=>[...e[7]||(e[7]=[g("取消",-1)])]),_:1}),t(c,{type:"primary",onClick:z},{default:l(()=>[...e[8]||(e[8]=[g("确定",-1)])]),_:1})])]),default:l(()=>[e[9]||(e[9]=P("span",null,"确定要删除吗？",-1))]),_:1},8,["modelValue"])],64)}}};export{G as default};
