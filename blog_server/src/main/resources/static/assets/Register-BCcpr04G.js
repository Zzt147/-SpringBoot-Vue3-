import{r as c,i as y,b as R,d as r,w as o,a as n,y as E,o as k,e as V,g as m,z as B,E as p}from"./index-BvHamNfy.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"register-container"},U={style:{"margin-top":"20px",color:"#666"}},j={__name:"Register",setup(F){const f=E(),b=c("default"),g=c(),t=y({username:"",email:"",password:"",confirmPassword:""}),v=y({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在3到20个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],password:[{required:!0,validator:(u,e,s)=>{e===""?s(new Error("请输入密码")):e.length<6?s(new Error("密码长度不能小于6位")):s()},trigger:"blur"}],confirmPassword:[{required:!0,validator:(u,e,s)=>{e===""?s(new Error("请再次输入密码")):e!==t.password?s(new Error("两次输入密码不一致")):s()},trigger:"blur"}]}),x=async u=>{u&&await u.validate(async(e,s)=>{if(e)try{const{confirmPassword:i,...d}=t,l=await B.post("/api/user/register",d);l.data.success?p.alert("注册成功！","提示",{confirmButtonText:"确定",callback:()=>{f.push("/login")}}):p.alert(l.data.msg,"错误")}catch(i){p.alert("注册失败，请稍后重试","系统错误"),console.error("注册错误:",i)}else console.log("表单验证失败:",s)})},_=()=>{f.push("/login")};return(u,e)=>{const s=n("el-col"),i=n("el-row"),d=n("el-input"),l=n("el-form-item"),w=n("el-button"),P=n("el-form"),C=n("el-link");return k(),R("div",z,[r(i,{justify:"center"},{default:o(()=>[r(s,{span:10},{default:o(()=>[...e[5]||(e[5]=[V("h1",{class:"register-title"},"用户注册",-1)])]),_:1})]),_:1}),r(i,{justify:"center"},{default:o(()=>[r(s,{span:8},{default:o(()=>[r(P,{ref_key:"registerFormRef",ref:g,model:t,rules:v,size:b.value,"label-width":"120px"},{default:o(()=>[r(l,{label:"用户名：",prop:"username"},{default:o(()=>[r(d,{modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=a=>t.username=a),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),r(l,{label:"邮箱：",prop:"email"},{default:o(()=>[r(d,{modelValue:t.email,"onUpdate:modelValue":e[1]||(e[1]=a=>t.email=a),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),r(l,{label:"密码：",prop:"password"},{default:o(()=>[r(d,{modelValue:t.password,"onUpdate:modelValue":e[2]||(e[2]=a=>t.password=a),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),r(l,{label:"确认密码：",prop:"confirmPassword"},{default:o(()=>[r(d,{modelValue:t.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>t.confirmPassword=a),type:"password",placeholder:"请再次输入密码"},null,8,["modelValue"])]),_:1}),r(l,null,{default:o(()=>[r(w,{type:"primary",onClick:e[4]||(e[4]=a=>x(g.value))},{default:o(()=>[...e[6]||(e[6]=[m("注册",-1)])]),_:1}),r(w,{onClick:_},{default:o(()=>[...e[7]||(e[7]=[m("返回登录",-1)])]),_:1})]),_:1})]),_:1},8,["model","rules","size"])]),_:1})]),_:1}),r(i,{justify:"center"},{default:o(()=>[r(s,{span:8},{default:o(()=>[V("p",U,[e[9]||(e[9]=m(" 已有账号？",-1)),r(C,{type:"primary",onClick:_},{default:o(()=>[...e[8]||(e[8]=[m("立即登录",-1)])]),_:1})])]),_:1})]),_:1})])}}},L=q(j,[["__scopeId","data-v-0ef28de0"]]);export{L as default};
