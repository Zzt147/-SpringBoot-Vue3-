import{i as h,r as H,A as N,p as T,E as P,b as d,d as a,w as t,a as i,F as I,B as K,o as s,C as A,u as p,D,k as w,f as V,g as m,G,H as q,I as J,t as v,h as L}from"./index-CGgmL17t.js";import{T as Q}from"./Top-BaQlssRE.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W={key:0,style:{"margin-bottom":"10px",color:"#409EFF"}},X={key:1,style:{"margin-bottom":"10px",color:"#666"}},Z={key:2,style:{"margin-bottom":"10px",color:"#999"}},$={key:3,style:{"margin-bottom":"10px",color:"#999"}},ee={key:4,style:{"margin-top":"20px","text-align":"center"}},ae={__name:"Search",setup(te){const e=h({articleCondition:{title:"",startDate:"",endDate:""},pageParams:{page:1,rows:5,total:0}});let _=h({articleVOs:[]});const k=T("axios"),n=H(!1);N(()=>{y()});function y(){e.pageParams.page===1||(e.pageParams.page=1),c()}function c(){n.value=!0,k({method:"post",url:"/api/article/articleSearch",data:e}).then(r=>{r.data.success?(_.articleVOs=r.data.map.articleVOs||[],e.pageParams.total=r.data.map.pageParams?.total||0):(P.alert(r.data.msg||"查询失败","提示"),_.articleVOs=[],e.pageParams.total=0)}).catch(r=>{console.error("查询错误:",r),P.alert("系统错误，请稍后再试！","错误"),_.articleVOs=[],e.pageParams.total=0}).finally(()=>{n.value=!1})}function S(r){e.pageParams.page=r,c()}function z(r){e.pageParams.rows=r,e.pageParams.page=1,c()}function M(){e.articleCondition.title="",e.articleCondition.startDate="",e.articleCondition.endDate="",e.pageParams.page=1,c()}return(r,l)=>{const Y=i("el-affix"),g=i("el-icon"),O=i("el-input"),u=i("el-col"),b=i("el-row"),C=i("el-date-picker"),x=i("el-button"),B=i("el-space"),f=i("el-table-column"),F=i("router-link"),U=i("el-table"),j=i("el-pagination"),E=K("loading");return s(),d(I,null,[a(Y,null,{default:t(()=>[a(Q)]),_:1}),a(b,{justify:"center",style:{"margin-top":"30px"}},{default:t(()=>[a(u,{span:12},{default:t(()=>[a(O,{modelValue:e.articleCondition.title,"onUpdate:modelValue":l[0]||(l[0]=o=>e.articleCondition.title=o),placeholder:"请输入文章标题关键字",clearable:"",onKeyup:A(y,["enter"]),disabled:n.value},{prefix:t(()=>[a(g,null,{default:t(()=>[a(p(D))]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),a(b,{justify:"center",style:{"margin-top":"15px"}},{default:t(()=>[a(u,{span:12},{default:t(()=>[a(B,{size:40},{default:t(()=>[a(C,{"value-format":"YYYY-MM-DD",modelValue:e.articleCondition.startDate,"onUpdate:modelValue":l[1]||(l[1]=o=>e.articleCondition.startDate=o),type:"date",placeholder:"起始日期",disabled:n.value},null,8,["modelValue","disabled"]),a(C,{"value-format":"YYYY-MM-DD",modelValue:e.articleCondition.endDate,"onUpdate:modelValue":l[2]||(l[2]=o=>e.articleCondition.endDate=o),type:"date",placeholder:"结束日期",disabled:n.value},null,8,["modelValue","disabled"]),a(x,{type:"primary",onClick:y,loading:n.value},{default:t(()=>[n.value?V("",!0):(s(),w(g,{key:0},{default:t(()=>[a(p(D))]),_:1})),l[5]||(l[5]=m(" 开始查询 ",-1))]),_:1},8,["loading"]),a(x,{onClick:M,disabled:n.value},{default:t(()=>[a(g,null,{default:t(()=>[a(p(G))]),_:1}),l[6]||(l[6]=m(" 重置 ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),a(b,null,{default:t(()=>[a(u,{span:1}),a(u,{span:22},{default:t(()=>[n.value?(s(),d("div",W,[a(g,{class:"is-loading"},{default:t(()=>[a(p(J))]),_:1}),l[7]||(l[7]=m(" 正在查询中... ",-1))])):e.pageParams.total>0?(s(),d("div",X," 共找到 "+v(e.pageParams.total)+" 条记录 ",1)):e.articleCondition.title||e.articleCondition.startDate||e.articleCondition.endDate?(s(),d("div",Z," 未找到符合条件的记录 ")):(s(),d("div",$," 请输入查询条件 ")),q((s(),w(U,{data:p(_).articleVOs,stripe:"",border:"",style:{width:"100%"},"empty-text":"暂无数据"},{default:t(()=>[a(f,{prop:"categories",label:"所属分类",width:"150"}),a(f,{label:"文章标题",width:"800"},{default:t(o=>[a(F,{to:{path:"/article_comment/"+o.row.id},style:{"text-decoration":"none",color:"#1890ff"},class:"article-title"},{default:t(()=>[m(v(o.row.title),1)]),_:2},1032,["to"])]),_:1}),a(f,{label:"发布时间",width:"170"},{default:t(o=>[m(v(p(L)(o.row.created,"yyyy-MM-dd HH:mm:ss")),1)]),_:1}),a(f,{prop:"hits",label:"点击量",width:"100"})]),_:1},8,["data"])),[[E,n.value]]),e.pageParams.total>0&&!n.value?(s(),d("div",ee,[a(j,{"current-page":e.pageParams.page,"onUpdate:currentPage":l[3]||(l[3]=o=>e.pageParams.page=o),"page-size":e.pageParams.rows,"onUpdate:pageSize":l[4]||(l[4]=o=>e.pageParams.rows=o),"page-sizes":[5,10,15,20],total:e.pageParams.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:z,onCurrentChange:S,disabled:n.value},null,8,["current-page","page-size","total","disabled"])])):V("",!0)]),_:1}),a(u,{span:1})]),_:1})],64)}}},ie=R(ae,[["__scopeId","data-v-75a6dd22"]]);export{ie as default};
