import{T as N}from"./Top-DbrhPMeH.js";import{r as M,c as A,a as s,b as x,o as m,d as e,w as o,e as r,f as S,g as T,t as y,F as P,h as B,i as $,j as V,k as w,l as O,u as z,m as R,n as F,p as C,E as H}from"./index-Kk2cQA5d.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as U}from"./me-_I26BSij.js";const E=["innerHTML"],j={key:0,class:"categories-height"},J={class:"categories-height"},Y=["innerHTML"],q=["innerHTML"],G={__name:"ArticleHeader",props:["article"],setup(v){const i=v,g=M(40),d=a=>{if(!a)return"未知日期";console.log("原始日期输入:",a,"类型:",typeof a);try{let c;if(typeof a=="number"||/^\d+$/.test(a)){const t=typeof a=="number"?a:parseInt(a);t.toString().length===10?c=new Date(t*1e3):c=new Date(t)}else typeof a=="string"?c=new Date(a):c=new Date(a);if(console.log("转换后的日期对象:",c),isNaN(c.getTime()))return console.log("日期无效，时间戳:",a),"无效日期";const n=B(c,"yyyy-MM-dd HH:mm:ss");return console.log("格式化结果:",n),n}catch(c){console.error("日期格式化错误:",c);try{const n=typeof a=="number"?a:parseInt(a),t=new Date(n),_=t.getFullYear(),p=String(t.getMonth()+1).padStart(2,"0"),u=String(t.getDate()).padStart(2,"0");return`${_}-${p}-${u}`}catch{return"日期错误"}}},l=A(()=>d(i.article.created));return(a,c)=>{const n=s("el-image"),t=s("el-col"),_=s("User"),p=s("el-icon"),u=s("el-space"),f=s("el-row"),b=s("router-link"),k=s("el-divider");return m(),x(P,null,[e(f,null,{default:o(()=>[e(t,{sm:24,md:11},{default:o(()=>[e(n,{src:i.article.thumbnail},null,8,["src"])]),_:1}),e(t,{sm:0,md:1}),e(t,{sm:24,md:12},{default:o(()=>[e(f,{align:"middle"},{default:o(()=>[e(u,{size:g.value},{default:o(()=>[r("span",{id:"categories",class:"categories-height",innerHTML:i.article.categories},null,8,E),i.article.authorName?(m(),x("span",j,[e(p,{style:{"vertical-align":"middle","margin-right":"2px"}},{default:o(()=>[e(_)]),_:1}),T(" "+y(i.article.authorName),1)])):S("",!0),r("span",J,"发布于 "+y(l.value),1)]),_:1},8,["size"])]),_:1}),e(f,{align:"middle"},{default:o(()=>[e(b,{to:{name:"articleAndComment",params:{articleId:i.article.id}},class:"title-link"},{default:o(()=>[r("span",{class:"title",innerHTML:i.article.title},null,8,Y)]),_:1},8,["to"])]),_:1}),e(f,{align:"middle"},{default:o(()=>[r("span",{innerHTML:i.article.content.substring(0,90)},null,8,q)]),_:1})]),_:1}),e(t,{span:1})]),_:1}),e(k)],64)}}},K=D(G,[["__scopeId","data-v-6c94c9c7"]]),Q={class:"read-ranking-container"},W={__name:"ReadRanking",props:["articleVOs"],setup(v){const i=v;let g=$([]);return V(()=>i.articleVOs,(d,l)=>{if(g.length=0,!(!d||!Array.isArray(d)))for(let a=0;a<d.length;a++)d[a]&&d[a].title&&g.push({index:a+1,id:d[a].id,title:d[a].title,hits:d[a].hits||0})}),(d,l)=>{const a=s("router-link"),c=s("el-divider"),n=s("el-col"),t=s("el-row");return m(),x("div",Q,[(m(!0),x(P,null,O(z(g),_=>(m(),w(t,{key:_.id},{default:o(()=>[e(n,{span:24},{default:o(()=>[r("span",null,y(_.index)+"、",1),e(a,{to:{name:"articleAndComment",params:{articleId:_.id}},class:"ranking-title-link"},{default:o(()=>[T(y(_.title),1)]),_:2},1032,["to"]),r("span",null,y(_.hits),1),e(c,{class:"divider"})]),_:2},1024)]),_:2},1024))),128)),z(g).length===0?(m(),w(t,{key:0},{default:o(()=>[e(n,{span:24},{default:o(()=>[...l[0]||(l[0]=[r("div",{style:{"text-align":"center",color:"#999",padding:"20px"}}," 暂无排行数据 ",-1)])]),_:1})]),_:1})):S("",!0)])}}},X=D(W,[["__scopeId","data-v-7be3e14a"]]),Z={align:"center"},I={align:"center"},ee={align:"left"},te={__name:"index",setup(v){const i=R(),g=M(20),d=C("axios"),l=$({articles:[],pageParams:{page:i.home.page,rows:5,total:0},articleVOs:[]});function a(){d({method:"post",url:"/api/article/getIndexData1",data:l.pageParams}).then(n=>{n.data.success?(l.articles=n.data.map.articles,l.articleVOs=n.data.map.articleVOs,l.pageParams=n.data.map.pageParams,n.data.map.pageParams&&(l.pageParams=n.data.map.pageParams)):H.alert(n.data.msg,"结果")}).catch(n=>{H.alert("系统错误！","结果")})}a(),C("toArticle"),F((n,t)=>(n.fullPath.indexOf("article_comment")>=0?i.home.page=l.pageParams.page:i.home.page=1,!0));function c(n){l.pageParams.page=n,a()}return(n,t)=>{const _=s("el-affix"),p=s("el-col"),u=s("el-row"),f=s("el-pagination"),b=s("el-image"),k=s("font-awesome-icon"),L=s("el-space");return m(),x(P,null,[e(_,null,{default:o(()=>[e(N)]),_:1}),e(u,{style:{"margin-top":"40px"},align:"top"},{default:o(()=>[e(p,{span:1}),e(p,{span:14},{default:o(()=>[e(u,null,{default:o(()=>[e(p,null,{default:o(()=>[(m(!0),x(P,null,O(l.articles,h=>(m(),w(K,{key:h.id,article:h},null,8,["article"]))),128))]),_:1})]),_:1}),e(u,null,{default:o(()=>[e(p,null,{default:o(()=>[e(f,{currentPage:l.pageParams.page,"onUpdate:currentPage":t[0]||(t[0]=h=>l.pageParams.page=h),"page-size":l.pageParams.rows,"onUpdate:pageSize":t[1]||(t[1]=h=>l.pageParams.rows=h),layout:"prev, pager, next",total:l.pageParams.total,onCurrentChange:c,"pager-count":7},null,8,["currentPage","page-size","total"])]),_:1})]),_:1})]),_:1}),e(p,{span:1}),e(p,{span:7},{default:o(()=>[r("fieldset",Z,[t[2]||(t[2]=r("legend",null,[r("h3",null,"CrazyStone")],-1)),e(b,{src:z(U)},null,8,["src"]),t[3]||(t[3]=r("div",{style:{"margin-top":"16px"}},"Java后台开发",-1)),t[4]||(t[4]=r("div",{style:{"margin-top":"16px"}}," 个人博客小站，主要发表关于Java、Spring、Docker等相关文章 ",-1))]),r("fieldset",I,[t[5]||(t[5]=r("legend",null,[r("h3",null,"联系我")],-1)),e(L,{size:g.value},{default:o(()=>[e(k,{class:"icon",icon:["fab","github"],size:"lg",border:""}),e(k,{class:"icon",icon:["fab","weibo"],size:"lg",border:""})]),_:1},8,["size"])]),r("fieldset",ee,[t[6]||(t[6]=r("legend",null,[r("h3",null,"阅读排行榜")],-1)),e(X,{articleVOs:l.articleVOs},null,8,["articleVOs"])])]),_:1}),e(p,{span:1})]),_:1})],64)}}},se=D(te,[["__scopeId","data-v-c19bf9ed"]]);export{se as default};
